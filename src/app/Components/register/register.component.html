<form
  [formGroup]="registerForm"
  (ngSubmit)="registerSubmit()"
  class="p-4 shadow-sm bg-white rounded"
  style="max-width: 500px; margin: auto"
>
  <h3 class="mb-4 text-center">Create an Account</h3>

  @if (errorMessage) {
  <div class="alert alert-danger mt-3 mb-0 text-center">
    {{ errorMessage }}
  </div>
  } @if (success) {
  <div class="alert alert-success mt-3 mb-0 text-center">
    Registered successfully!
  </div>
  }

  <div class="mb-3">
    <label for="username" class="form-label">Username</label>
    <input
      type="text"
      id="username"
      formControlName="username"
      class="form-control"
      placeholder="Your username"
    />
    @if (registerForm.get('username')?.touched &&
    registerForm.get('username')?.invalid) {
    <div class="text-danger mt-1">
      @if (registerForm.get('username')?.errors?.['required']) { Username is
      required. } @if (registerForm.get('username')?.errors?.['minlength']) {
      Username must be at least 3 characters. } @if
      (registerForm.get('username')?.errors?.['maxlength']) { Username cannot
      exceed 20 characters. }
    </div>
    }
  </div>

  <div class="mb-3">
    <label for="email" class="form-label">Email</label>
    <input
      type="email"
      id="email"
      formControlName="email"
      class="form-control"
      placeholder="name@example.com"
    />
    @if (registerForm.get('email')?.touched &&
    registerForm.get('email')?.invalid) {
    <div class="text-danger mt-1">
      @if (registerForm.get('email')?.errors?.['required']) { Email is required.
      } @if (registerForm.get('email')?.errors?.['email']) { Please enter a
      valid email. }
    </div>
    }
  </div>

  <div class="mb-3">
    <label for="password" class="form-label">Password</label>
    <input
      type="password"
      id="password"
      formControlName="password"
      class="form-control"
      placeholder="Enter a strong password"
    />
    @if (registerForm.get('password')?.touched &&
    registerForm.get('password')?.invalid) {
    <div class="text-danger mt-1">
      @if (registerForm.get('password')?.errors?.['required']) { Password is
      required. } @if (registerForm.get('password')?.errors?.['minlength']) {
      Password must be at least 6 characters. } @if
      (registerForm.get('password')?.errors?.['pattern']) { Password must
      contain at least one letter, one number, and one special character. }
    </div>
    }
  </div>

  <div class="mb-3">
    <label for="rePassword" class="form-label">Confirm Password</label>
    <input
      type="password"
      id="rePassword"
      formControlName="rePassword"
      class="form-control"
      placeholder="Re-enter your password"
    />
    @if (registerForm.get('rePassword')?.touched &&
    registerForm.get('rePassword')?.invalid) {
    <div class="text-danger mt-1">
      @if (registerForm.get('rePassword')?.errors?.['required']) { Please
      confirm your password. }
    </div>
    } @if (registerForm.errors?.['mismatch'] && registerForm.touched) {
    <div class="text-danger mt-1">Passwords do not match.</div>
    }
  </div>

  <div class="d-grid mt-4">
    <button
      type="submit"
      class="btn btn-lavender"
      [disabled]="registerForm.invalid || isLoading"
    >
      {{ isLoading ? "Registering..." : "Register" }}
    </button>
  </div>

  <p class="mt-3 text-center">
    Already have an account? <a routerLink="/login">Login here</a>
  </p>
</form>
