<div class="container mt-5">
  <h3 class="mb-4 text-center">Add Address</h3>

  <form
    [formGroup]="addressForm"
    (ngSubmit)="addAddress()"
    class="p-4 shadow-sm bg-white rounded"
    style="max-width: 500px; margin: auto"
  >
    @if (errorMessage) {
    <div class="alert alert-danger mt-3 mb-0 text-center">
      {{ errorMessage }}
    </div>
    }

    <div class="mb-3">
      <label for="street" class="form-label">Street</label>
      <input
        type="text"
        id="street"
        formControlName="street"
        class="form-control"
        placeholder="Enter street"
      />
      @if (addressForm.get('street')?.touched &&
      addressForm.get('street')?.invalid) {
      <div class="text-danger mt-1">
        @if (addressForm.get('street')?.errors?.['required']) { Street is
        required. }
      </div>
      }
    </div>

    <div class="mb-3">
      <label for="city" class="form-label">City</label>
      <input
        type="text"
        id="city"
        formControlName="city"
        class="form-control"
        placeholder="Enter city"
      />
      @if (addressForm.get('city')?.touched && addressForm.get('city')?.invalid)
      {
      <div class="text-danger mt-1">
        @if (addressForm.get('city')?.errors?.['required']) { City is required.
        }
      </div>
      }
    </div>

    <div class="mb-3">
      <label for="postalCode" class="form-label">Postal Code</label>
      <input
        type="text"
        id="postalCode"
        formControlName="postalCode"
        class="form-control"
        placeholder="Enter 5-digit postal code"
      />
      @if (addressForm.get('postalCode')?.touched &&
      addressForm.get('postalCode')?.invalid) {
      <div class="text-danger mt-1">
        @if (addressForm.get('postalCode')?.errors?.['required']) { Postal code
        is required. } @if (addressForm.get('postalCode')?.errors?.['pattern'])
        { Postal code must be 5 digits. }
      </div>
      }
    </div>

    <div class="d-flex justify-content-end">
      @if (addresses.length < maxAddresses) {
      <button
        type="submit"
        class="btn btn-lavender"
        [disabled]="addressForm.invalid"
      >
        <span class="fs-5">+</span> Add Address
      </button>
      }
    </div>
  </form>

  <div class="row mt-4">
    @for (address of addresses; track address.street) {
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Address</h5>
          <p class="card-text">
            <strong>Street:</strong> {{ address.street }}<br />
            <strong>City:</strong> {{ address.city }}<br />
            <strong>Postal Code:</strong> {{ address.postalCode }}
          </p>
        </div>
      </div>
    </div>
    }
  </div>
</div>
